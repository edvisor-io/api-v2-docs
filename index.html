<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Edvisor.io GraphQL API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0" y="0" viewBox="0 0 247 47" enable-background="new 0 0 247 47" xml:space="preserve">
        <path d="M0 46.3L10.3 1.3h26.4l-1.9 7.9H17.7l-2.4 10.6h13.6L27 27.7H13.5l-2.4 10.6h17.2l-1.8 7.9L0 46.3 0 46.3z"></path>
        <path d="M41.5 47c-3.1 0-5.5-1-7.1-3 -1.6-2-2.4-4.9-2.4-8.6s0.6-7.3 1.8-10.7c1.2-3.4 3.1-6.3 5.7-8.6 2.6-2.4 5.7-3.5 9.1-3.5 1.5 0 3.7 0.4 6.6 1.1l1.3 0.4L59.8 0h8.9L58 46.3h-8.6l0.6-3.4c-0.9 1-2.2 2-3.8 2.9C44.4 46.6 42.9 47 41.5 47zM55 20.9c-2.6-0.6-4.6-0.9-6.3-0.9 -1.6 0-3 0.9-4.2 2.6 -1.2 1.8-2.1 3.7-2.7 6.1C41.3 31 41 33.2 41 35.3c0 2.8 1.1 4.2 3.4 4.2 0.7 0 1.7-0.4 2.9-1.2s2.3-1.6 3.2-2.4l1.3-1.2L55 20.9z"></path>
        <path d="M69 13.2h8.7l-0.9 25.7H78l11.3-25.7h8.9L82.7 46.3H68.8L69 13.2z"></path>
        <path d="M95 46.3l7.6-33.1h8.8l-7.6 33.1H95zM103.3 9.7l2.1-9h8.9l-2.1 9H103.3z"></path>
        <path d="M127.4 20c-1.3 0-2.3 0.3-3 0.9 -0.7 0.6-1.1 1.3-1.1 2.2 0 0.8 0.3 1.4 0.9 1.8 0.6 0.4 2.2 1 4.8 1.8 2.6 0.8 4.5 1.7 5.8 2.7 1.3 1.1 2 2.7 2 5.1 0 4.1-1.4 7.3-4.1 9.4s-6.3 3.2-10.8 3.2c-1.9 0-3.8-0.2-5.7-0.6 -1.9-0.4-3.3-0.8-4.2-1.2l-1.5-0.5 1.7-6.5c4.2 0.8 7.9 1.2 11 1.2s4.6-1.1 4.6-3.2c0-0.6-0.3-1-0.9-1.4 -0.6-0.4-1.7-0.7-3.2-1.2 -3.1-0.9-5.5-1.9-6.9-3.1 -1.5-1.2-2.3-2.9-2.3-5.1 0-4.1 1.4-7.3 4-9.6 2.7-2.3 5.9-3.5 9.7-3.5 2.1 0 4.1 0.2 6.1 0.5 2 0.3 3.4 0.7 4.4 1l1.5 0.5 -1.6 6.6C134 20.4 130.3 20 127.4 20z"></path>
        <path d="M157.6 12.4c8.7 0 13 4.2 13 12.5 0 3.6-0.6 7-1.8 10.3 -1.2 3.3-3.1 6.1-5.7 8.4s-5.7 3.5-9.2 3.5c-8.7 0-13-4.1-13-12.5 0-3.5 0.7-7 1.9-10.3 1.3-3.3 3.2-6.1 5.9-8.4C151.3 13.6 154.2 12.4 157.6 12.4zM153.9 39.5c2.4 0 4.3-1.5 5.8-4.5 1.5-3 2.2-6.4 2.2-10.2 0-3.2-1.4-4.8-4.2-4.8 -2.4 0-4.3 1.5-5.8 4.5s-2.2 6.4-2.2 10.2C149.6 37.9 151.1 39.5 153.9 39.5z"></path>
        <path d="M170.3 46.3l7.6-33.1h8.8l-1.2 4.7c1.3-1.2 3-2.4 5.1-3.5s3.8-1.8 5.3-2l-2.6 9.2c-2.1 0.7-4.7 1.7-7.7 3l-1.6 0.7 -4.8 20.9L170.3 46.3 170.3 46.3z"></path>
        <path d="M186.6 46.3l2.3-10.1h9l-2.3 10.1H186.6z"></path>
        <path d="M199.7 46.3l7.6-33.1h8.8l-7.6 33.1H199.7zM208.1 9.7l2.1-9h8.9l-2.1 9H208.1z"></path>
        <path d="M232.9 12.4c8.7 0 13 4.2 13 12.5 0 3.6-0.6 7-1.8 10.3 -1.2 3.3-3.1 6.1-5.7 8.4s-5.7 3.5-9.2 3.5c-8.7 0-13-4.1-13-12.5 0-3.5 0.7-7 1.9-10.3s3.2-6.1 5.9-8.4C226.6 13.6 229.5 12.4 232.9 12.4zM229.2 39.5c2.4 0 4.3-1.5 5.8-4.5 1.5-3 2.2-6.4 2.2-10.2 0-3.2-1.4-4.8-4.2-4.8 -2.4 0-4.3 1.5-5.8 4.5s-2.2 6.4-2.2 10.2C224.9 37.9 226.4 39.5 229.2 39.5z"></path>
      </svg>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.edvisor.io'>Sign Up for Edvisor.io</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="introduction">Introduction</h1>

<blockquote>
<p>Sample GraphQL Request:</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.edvisor.io/graphql
</code></pre>
<blockquote>
<p>Sample GraphQL Request Body:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"query {
    student(studentId: 123) {
      firstname, 
      lastname, 
      email
    }
  }"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Welcome to the Edvisor.io GraphQL API! You can use this API to create, read, update, and delete commonly used objects in Edvisor.io.</p>

<p>This Edvisor.io API follows GraphQL (http://graphql.org/). </p>

<p>To access our API, please contact us at <a href='mailto:support@edvisor.io'>support@edvisor.io</a>.</p>

          <h1 id="integrations">Integrations</h1>

<p>An Edvisor Agency account manages information about students, staff tasks and reminders, quotes, invoices, products and services (courses, accommodations, add-ons, fees) offered by “connected” schools, products and services offered by the agency, and student registrations. </p>

<p>This document is provides an overview of the ways you can integrate with your edvisor agency account and the types of data you can push, pull, or synch with.  Most commonly, we see Edvisor Agency integrations with 3rd party CRMs (to make quoting and registering students more seamless), B2C Websites (to provide quoting or ecommerce functionality for students online), and accounting systems. </p>

<p>There are three ways to integrate with your Edvisor account. </p>

<h2 id="api-integration">API integration</h2>

<p>This method allows you to update data in your Edvisor account with changes in your external system by calling the Edvisor API.</p>

<p><img src='images/integration_agency_1.png'></p>

<h2 id="webhooks-integration">Webhooks integration</h2>

<p>This method allows you to update your external system with changes in your Edvisor account by registering a webhook and subscribing to the relevant events and implementing the necessary logic needed to handle the change event to update your existing system. </p>

<p><img src='images/integration_agency_2.png'></p>

<h2 id="api-and-webhooks-integration">API and Webhooks integration</h2>

<p>This method allows 2-way synchronization between your Edvisor account and your existing back-office system by combining Method 1 and Method 2.</p>

          <h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"https://api.edvisor.io/graphql"</span>
  -H <span class="s2">"Authorization: Bearer &lt;your_edvisor_api_key&gt;"</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code class="prettyprint">your_edvisor_api_key</code> with your API key.</p>
</blockquote>

<p>Edvisor.io uses API keys to allow access to the API. To access our API, please contact us at <a href='mailto:support@edvisor.io'>support@edvisor.io</a>.</p>

<p>Edvisor.io expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code class="prettyprint">Authorization: Bearer &lt;your_edvisor_api_key&gt;</code></p>

<aside class="notice">
You must replace <code>your_edvisor_api_key</code> with your API key.
</aside>

<aside class="warning">
It is your responsibility to not expose your Edvisor.io API key to the public. All requests to the Edvisor API should be made from your server and not a customer-facing front end.
</aside>

          <h1 id="webhooks">Webhooks</h1>

<h2 id="introduction">Introduction</h2>

<p>In addition to the available GraphQL API, Edvisor.io can register webhooks so you can 
synchronise the data in your agency account with an external service or system. When 
registering a webhook, you’re able to subscribe to specific events so that you only 
receive the events (synchronize the data) that you want. </p>

<p>For example, if you’d like keep the student information in your external CRM up-to-date with 
changes made to students in your Edvisor.io account, you can register a webhook that 
subscribes to the “student:update” event.  When a student is updated on Edvisor.io, we will 
then send the updated information to a pre-set URL.</p>

<p>Sample Webhook:</p>

<p>Webhook endpoint: <code class="prettyprint">https://api.your-agency.com/webhook/edvisor</code></p>

<p>Events subscribed: <code class="prettyprint">student:create</code>, <code class="prettyprint">student:update</code></p>

<p>What happens: When a student is updated or created, we will send a <code class="prettyprint">POST https://api.your-agency.com/webhook/edvisor</code> request with a body containing the changes that represent the event.</p>

<h2 id="responding-to-a-webhook">Responding to a webhook</h2>

<p>To acknowledge receipt of a webhook, your endpoint should return a 2xx HTTP status code. Any 
other information returned in the request headers or request body is ignored. All response 
codes outside this range, including 3xx codes, will indicate to Edvisor.io that you did not 
receive the webhook. This does mean that a URL redirection or a &ldquo;Not Modified&rdquo; response will 
be treated as a failure.</p>

<p>If a webhook is not successfully received for any reason, Edvisor.io will continue trying 
to send the webhook once every 15 minutes for up to 3 days. </p>

<h2 id="available-events">Available events</h2>

<h3 id="student">Student</h3>

<ul>
<li>student:create</li>
<li>student:update</li>
<li>student:delete</li>
</ul>

<h3 id="school">School</h3>

<ul>
<li>school:create</li>
<li>school:update</li>
<li>school:delete</li>
</ul>

<h3 id="offering">Offering</h3>

<ul>
<li>offering:create</li>
<li>offering:update</li>
<li>offering:delete</li>
</ul>

<h3 id="quote">Quote</h3>

<ul>
<li>quote:create</li>
<li>quote:update</li>
<li>quote:delete</li>
</ul>

<h3 id="promotion">Promotion</h3>

<ul>
<li>promotion:create</li>
<li>promotion:update</li>
<li>promotion:delete</li>
</ul>

<h3 id="student-enrollment">Student enrollment</h3>

<ul>
<li>studentEnrollment:create</li>
<li>studentEnrollment:update</li>
<li>studentEnrollment:delete</li>
</ul>

<h2 id="event-object">Event Object</h2>

<p>The event object that is sent along with the webhook request will be structured like the following:</p>

<blockquote>
<p>Sample Event object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-31T19:12:43.687Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"firstname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lastname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Garcia"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.garcia@education-agency.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"student:update"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"after"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"studentId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frank@email.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"before"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"studentId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>created</td>
<td>Timestamp of when this event occured</td>
</tr>
<tr>
<td>user</td>
<td>Information regarding the creator of this event</td>
</tr>
<tr>
<td>user.userId</td>
<td></td>
</tr>
<tr>
<td>user.firstname</td>
<td></td>
</tr>
<tr>
<td>user.lastname</td>
<td></td>
</tr>
<tr>
<td>user.email</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>Event name (ie. <code class="prettyprint">student:create</code>)</td>
</tr>
<tr>
<td>data</td>
<td></td>
</tr>
<tr>
<td>data.after</td>
<td>The object affected AFTER the event has taken place</td>
</tr>
<tr>
<td>data.before</td>
<td>the object BEFORE the event took place</td>
</tr>
</tbody></table>

          <h1 id="api">API</h1>

<p>You can view the full API documentation for our <a href='/schema/'>GraphQL API here</a>. </p>

<p>Please note that we are currently using GraphQL which is quite different from typical RESTful API&rsquo;s. To learn
more about how to interact with a GraphQL API, please checkout <a href='http://graphql.org/'>http://graphql.org/</a>.</p>

<p>To access our API, please contact us at <a href='mailto:support@edvisor.io'>support@edvisor.io</a>.</p>

          <h1 id="errors">Errors</h1>

<p>Edvisor.io will respond with a 200 success code even if there are operational errors. This follows the GraphQL specification. All errors will be described in an <code class="prettyprint">errors</code> array in the response.</p>
<pre class="highlight json"><code><span class="err">#Sample</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">response</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"agencyCompany"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unauthenticated"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"locations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"line"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nt">"column"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"agencyCompany"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
